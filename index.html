<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>dycss test page</title>
    <style type="text/css">
        html, body {
            margin: 0;
            padding: 0;
        }
        .box {
            height: 20px;
            width: 30px;
            float:left;
            *display: inline;
        }
        .even {
            background: #ddd;
        }
    </style>
</head>
<body>
    <div>
        resize the window ( 这个例子在窗口缩小的时候会有抖动，是因为先resize,再render style，周围没有留足空间缓冲，只是例子本身的问题 )
    </div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>
    <div class="box"></div>
    <div class="box even"></div>

    <script src="./dcss.js" type="text/javascript"></script>
    <script type="text/javascript">
        var oneLineNum = 10;
        var resizeTimer;
        var bodyEl = document.getElementsByTagName('body')[0];


        function resizeHandler(){
            var bodyWidth = Math.max(bodyEl.scrollWidth, bodyEl.clientWidth);
            var boxWidth = bodyWidth / oneLineNum;
            Dcss.rule('.box', 'width', boxWidth + 'px');
            if( boxWidth & 1 ){
                Dcss.rule('.even', {background: 'black'});
            }
            else {
                Dcss.rule('.even', {background: 'green'});
            }
            Dcss.render();
        }

        window.onresize = function(){
          clearTimeout(resizeTimer);
          resizeTimer = setTimeout(function(){resizeHandler();}, 100);
        };

        resizeHandler();


    </script>
</body>
</html>
